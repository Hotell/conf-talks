# HoC

```tsx
// 4. injected props + mapped type via conditional types explanation
type InjectedProps = Parameters<ComponentProps<typeof Counter>['children']>[0]

// 5. extended { maxCount?: number }
type ExtendedProps = { maxCount?: number }

// 3. withCounter
const withCounter = <P extends InjectedProps>(Cmp: JSXElementConstructor<P>) => {

  const WithCounter = (props: Omit<P, keyof InjectedProps> & ExtendedProps) => {

    const { maxCount, ...passThroughProps } = props

    return <Counter>{(injectedProps)=>{
      if(maxCount!=null && injectedProps.count > maxCount){
        return <p className={classes.alertDanger}>YOU SHALL NOT PASS</p>
      }

      return (
        <Cmp {...injectedProps as P} {...passThroughProps} />
      )
    }}</Counter>
  }

  return WithCounter
}


// 1. CounterWannabe
//  a. introduce InjectedProps ☝️
//  b. { colorType?: ColorTypes } -> passThrough in withCounter
type CounterWannabeProps = {
  count: number
  inc: () => void
  dec: () => void
  colorType?: ColorTypes
}

const CounterWannabe = (props: CounterWannabeProps) => {
  const { count, inc, colorType } = props
  const classes = `alert alert-${colorType}`

  return (
    <div style={{ cursor: 'pointer' }} className={classes} onClick={inc}>
      {count}
    </div>
  )
}

// 2. ExtendedComponent
const ExtendedComponent = withCounter(CounterWannabe)
```